<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesan Romantis Untukmu</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka&display=swap');

        * {
            font-family: "Roboto", sans-serif;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        body {
            background-color: rgb(36, 36, 36);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }

        #waktu h1 {
            font-family: "Fredoka";
            font-weight: 20;
            font-size: 70px;
            color: white;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        #waktu p {
            color: white;
            font-family: "Roboto";
            font-weight: 100;
            font-size: 20px;
            margin-top: 10px;
            text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.5);
        }

        .background1 {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)),
                url('assets/img/bg1.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .background2 {
            background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)),
                url('assets/img/bg2.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        .muncul {
            animation: muncul 1200ms ease;
        }

        @keyframes muncul {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        .body {
            text-align: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
            width: 100%;
            max-width: 470px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
        }

        #waktu {
            margin: 7rem 1rem 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-top: 100px;
        }

        .messege-box {
            text-align: left;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin: 2rem 1rem;
            padding: 20px;
            line-height: 1.6rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transform: translateX(-100vw);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .content {
            margin-top: 1rem;
        }

        .content .nama {
            font-size: 14px;
            color: #075e54;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .content .pesan {
            font-size: 16px;
            color: #333;
            line-height: 1.6;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
            word-wrap: break-word;
        }

        /* Scrollbar styling */
        .content .pesan::-webkit-scrollbar {
            width: 5px;
        }

        .content .pesan::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .content .pesan::-webkit-scrollbar-thumb {
            background: #25D366;
            border-radius: 10px;
        }

        .content .pesan::-webkit-scrollbar-thumb:hover {
            background: #128C7E;
        }

        #button {
            position: absolute;
            bottom: 7rem;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            text-align: center;
        }

        #button button {
            font-size: 20px;
            font-family: 'Fredoka', sans-serif;
            border: none;
            border-radius: 50px;
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            margin: 10px 0;
            letter-spacing: 1px;
        }

        #button button.mulai {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        #button button.hilang1 {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
        }

        #button button.hilang2 {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        #button button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .goyang {
            animation: goyang 2s infinite ease-in-out;
        }

        @keyframes goyang {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .kelip {
            animation: kelip 2s infinite ease-in-out;
        }

        @keyframes kelip {

            0%,
            100% {
                opacity: 1;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }

            50% {
                opacity: 0.9;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            }
        }

        .notif-wa {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }

        .left-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .left-header img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }

        .left-header p {
            font-size: 14px;
            color: #075e54;
            font-weight: bold;
            margin: 0;
        }

        .right-header p {
            font-size: 12px;
            color: #666;
            margin: 0;
        }

        .messege-box1 {
            animation-delay: 0.3s;
        }

        .messege-box2 {
            animation-delay: 0.6s;
        }

        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Roboto', sans-serif !important;
            width: 400px !important;
            max-width: 90% !important;
        }

        .swal2-title {
            color: #333 !important;
            font-size: 22px !important;
            margin-bottom: 15px !important;
        }

        .swal2-input {
            border-radius: 10px !important;
            border: 2px solid #ddd !important;
            font-size: 16px !important;
            padding: 12px 15px !important;
            margin: 10px 0 !important;
            transition: all 0.3s ease !important;
            width: 100% !important;
        }

        .swal2-input:focus {
            border-color: #25D366 !important;
            box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.1) !important;
        }

        .swal2-confirm {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%) !important;
            border-radius: 50px !important;
            padding: 12px 30px !important;
            font-size: 16px !important;
            font-family: 'Fredoka', sans-serif !important;
            margin-top: 10px !important;
        }

        .swal2-image {
            margin: 10px auto !important;
            max-width: 120px !important;
            max-height: 120px !important;
        }

        .date-note {
            font-size: 12px !important;
            color: #666 !important;
            margin-top: 5px !important;
            text-align: left !important;
            padding-left: 5px !important;
            display: block !important;
        }

        /* Styling untuk popup marah */
        .marah-popup {
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%) !important;
            animation: shake 0.5s ease-in-out !important;
        }

        .marah-popup .swal2-title {
            color: #fff !important;
            font-size: 24px !important;
        }

        .marah-popup .swal2-content {
            color: #fff !important;
            font-size: 18px !important;
            font-weight: bold !important;
        }

        .marah-popup .swal2-confirm {
            background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%) !important;
            font-weight: bold !important;
        }

        /* Styling untuk popup teka-teki */
        .teka-teki-popup {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%) !important;
        }

        .teka-teki-popup .swal2-title {
            color: #fff !important;
            font-size: 24px !important;
        }

        .teka-teki-popup .swal2-content {
            color: #fff !important;
            font-size: 18px !important;
        }

        .teka-teki-popup .swal2-input {
            border: 3px solid #fff !important;
            background: rgba(255, 255, 255, 0.1) !important;
            color: #fff !important;
            font-size: 18px !important;
            text-align: center !important;
        }

        .teka-teki-popup .swal2-input::placeholder {
            color: rgba(255, 255, 255, 0.7) !important;
        }

        .teka-teki-popup .swal2-confirm {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;
            font-weight: bold !important;
            font-size: 18px !important;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-5px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(5px);
            }
        }

        @media screen and (max-width: 600px) {
            .body {
                height: 100vh;
                width: 100vw;
                max-width: 100%;
                border-radius: 0;
            }

            #waktu h1 {
                font-size: 50px;
            }

            #waktu p {
                font-size: 16px;
            }

            .messege-box {
                margin: 1.5rem 1rem;
                padding: 15px;
            }

            #button button {
                padding: 12px 25px;
                font-size: 18px;
                min-width: 180px;
            }

            .content .pesan {
                max-height: 150px;
            }

            .swal2-popup {
                width: 90% !important;
                max-width: 350px !important;
            }

            .swal2-title {
                font-size: 20px !important;
            }
        }

        @media screen and (min-width: 601px) {
            .body {
                border-radius: 30px;
                overflow: hidden;
                height: 90vh;
                margin: 5vh 0;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <audio class="audio" loop>
        <source src="assets/audio/Sezairi - It's You.mp3" type="audio/mpeg">
    </audio>

    <div class="body">
        <div id="waktu">
            <h1>00:00</h1>
            <p>Hari, Tanggal Bulan Tahun</p>
        </div>

        <!-- PESAN 1 -->
        <div class="messege-box messege-box1">
            <div class="notif-wa">
                <div class="left-header">
                    <img src="assets/img/wa.png" />
                    <p>WHATSAPP</p>
                </div>
                <div class="right-header">
                    <p>Sekarang</p>
                </div>
            </div>
            <div class="content">
                <div class="nama">
                    <h2>Sayangku</h2>
                </div>
                <div class="pesan">
                    <p>Hai, sudah berapa lama kita bersama?</p>
                </div>
            </div>
        </div>

        <!-- PESAN 2 -->
        <div class="messege-box messege-box2">
            <div class="notif-wa">
                <div class="left-header">
                    <img src="assets/img/wa.png" />
                    <p>WHATSAPP</p>
                </div>
                <div class="right-header">
                    <p>Sekarang</p>
                </div>
            </div>
            <div class="content">
                <div class="nama">
                    <h2>Sayangku</h2>
                </div>
                <div class="pesan">
                    <p></p>
                </div>
            </div>
        </div>

        <div id="button">
            <button class="goyang mulai">Mulai</button>
            <button class="goyang hilang1" style="display: none;">Buka Pesan</button>
            <button class="goyang hilang2" style="display: none;">Balas Pesan</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        const dayID = () => {
            if (day == 1) {
                return 'Senin'
            }
            if (day == 2) {
                return 'Selasa'
            }
            if (day == 3) {
                return 'Rabu'
            }
            if (day == 4) {
                return 'Kamis'
            }
            if (day == 5) {
                return 'Jumat'
            }
            if (day == 6) {
                return 'Sabtu'
            }
            if (day == 7) {
                return 'Minggu'
            }
        }
        const monthID = () => {
            if (month == 0) {
                return 'Januari'
            }
            if (month == 1) {
                return 'Februari'
            }
            if (month == 2) {
                return 'Maret'
            }
            if (month == 3) {
                return 'April'
            }
            if (month == 4) {
                return 'Mei'
            }
            if (month == 5) {
                return 'Juni'
            }
            if (month == 6) {
                return 'Juli'
            }
            if (month == 7) {
                return 'Agustus'
            }
            if (month == 8) {
                return 'September'
            }
            if (month == 9) {
                return 'Oktober'
            }
            if (month == 10) {
                return 'November'
            }
            if (month == 11) {
                return 'Desember'
            }
        }
    </script>
    <script>
        const btnPlay = document.querySelector('#button .mulai');
        const messege1 = document.querySelector('.messege-box1');
        const messege2 = document.querySelector('.messege-box2');
        const messege2P = document.querySelector('.messege-box2 .pesan p');
        const hilang1 = document.querySelector('.hilang1');
        const hilang2 = document.querySelector('.hilang2');
        const nama = document.querySelectorAll('.nama h2')[0];
        const nama1 = document.querySelectorAll('.nama h2')[1];
        const waktu = document.getElementById('waktu');
        const jam = waktu.querySelector('h1');
        const hari = waktu.querySelector('p');
        const body = document.querySelector('.body');
        const audio = document.querySelector('.audio');

        // Set initial background
        body.classList.add('background1');

        // Get current date and time
        const date = new Date();
        const hour = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');

        // Use existing waktuIndo.js functions if available
        try {
            hari.innerHTML = `${dayID()}, ${date.getDate()} ${monthID()} ${date.getFullYear()}`;
        } catch (e) {
            // Fallback if waktuIndo.js not found
            const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
            const months = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni',
                'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];
            hari.innerHTML = `${days[date.getDay()]}, ${date.getDate()} ${months[date.getMonth()]} ${date.getFullYear()}`;
        }

        jam.innerHTML = `${hour}:${minutes}`;

        // Configuration - DIPERBAHARUI
        const pengirim = "Pacal Kamu";
        const nomorWa = "628996366033"; // Nomor WhatsApp Anda
        const textWa = "Waktunya Teka Teki Cinta!";
        const TANGGAL_BENAR = "0*/0*/20**"; // Tanggal yang benar

        // Set sender name
        if (pengirim) {
            nama.innerHTML = pengirim;
            nama1.innerHTML = pengirim;
        } else {
            nama.innerHTML = "Pacal Kamu";
            nama1.innerHTML = "Pacal Kamu";
        }

        // Function to calculate relationship duration
        function calculateDuration(tanggalJadian) {
            const parts = tanggalJadian.split('/');
            const startDate = new Date(parts[2], parts[1] - 1, parts[0]);
            const today = new Date();

            let years = today.getFullYear() - startDate.getFullYear();
            let months = today.getMonth() - startDate.getMonth();
            let days = today.getDate() - startDate.getDate();

            if (days < 0) {
                months--;
                const prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                days += prevMonth.getDate();
            }

            if (months < 0) {
                years--;
                months += 12;
            }

            return { years, months, days };
        }

        // Format duration text
        function formatDuration(years, months, days) {
            let result = [];
            if (years > 0) result.push(`${years} tahun`);
            if (months > 0) result.push(`${months} bulan`);
            if (days > 0) result.push(`${days} hari`);
            return result.join(' ');
        }

        // Function to show angry message
        function showAngryMessage(attempts, callback) {
            const angryMessages = [
                "EH JANGAN BOHONG DONG! Tanggal jadian kita itu 05/05/2024! Masukkan yang bener!",
                "SERIUS NIH?! Udah lupa tanggal jadian kita? Coba inget-inget lagi!",
                "AKU SEDIH NIH KALO SAMPAI LUPA... Tanggalnya 05/05/2024 ya sayang!",
                "TERAKHIR KALI NIH PERINGATAN! 05/05/2024! JANGAN SAMPAI LUPA LAGI!"
            ];

            const messageIndex = Math.min(attempts, angryMessages.length - 1);

            Swal.fire({
                title: 'SALAH! üò†',
                text: angryMessages[messageIndex],
                icon: 'error',
                confirmButtonText: 'Coba Lagi',
                confirmButtonColor: '#ff4757',
                background: '#ff6b6b',
                color: 'white',
                customClass: {
                    popup: 'marah-popup'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    callback(); // Panggil callback untuk menampilkan form input lagi
                }
            });
        }

        // Function untuk menampilkan form input nama dan tanggal
        function showInputForm() {
            Swal.fire({
                title: 'Halo! ‚ù§Ô∏è',
                html: `
            <div style="text-align: left; margin-bottom: 15px; color: #555;">
                Masukkan nama kamu dan tanggal jadian kita ya...
            </div>
            <input type="text" id="namaInput" class="swal2-input" placeholder="Nama Kamu">
            <input type="text" id="tanggalInput" class="swal2-input" placeholder="Tanggal Jadian (DD/MM/YYYY)">
            <div class="date-note">Contoh: 0*/0*/20**</div>
        `,
                imageUrl: "assets/img/stiker_mylove.gif",
                imageWidth: 100,
                imageHeight: 100,
                imageAlt: "Love Sticker",
                showCancelButton: false,
                confirmButtonText: 'Kirim',
                confirmButtonColor: '#25D366',
                focusConfirm: false,
                allowOutsideClick: false,
                preConfirm: () => {
                    const namaValue = Swal.getPopup().querySelector('#namaInput').value;
                    const tanggalValue = Swal.getPopup().querySelector('#tanggalInput').value;

                    if (!namaValue) {
                        Swal.showValidationMessage('Masukkan nama kamu dong!');
                        return false;
                    }

                    if (!tanggalValue) {
                        Swal.showValidationMessage('Tanggal jadian jangan lupa!');
                        return false;
                    }

                    // Validate date format
                    const dateRegex = /^(\d{2})\/(\d{2})\/(\d{4})$/;
                    if (!dateRegex.test(tanggalValue)) {
                        Swal.showValidationMessage('Format tanggal harus DD/MM/YYYY');
                        return false;
                    }

                    // Check if date is valid
                    const parts = tanggalValue.split('/');
                    const day = parseInt(parts[0], 10);
                    const month = parseInt(parts[1], 10);
                    const year = parseInt(parts[2], 10);

                    if (day < 1 || day > 31 || month < 1 || month > 12 || year < 2000 || year > 2100) {
                        Swal.showValidationMessage('Tanggal tidak valid');
                        return false;
                    }

                    // Check specific date (05/05/2024)
                    if (tanggalValue !== TANGGAL_BENAR) {
                        return false;
                    }

                    return { nama: namaValue, tanggal: tanggalValue };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const namaValue = result.value.nama;
                    const tanggalValue = result.value.tanggal;

                    // Calculate relationship duration
                    const duration = calculateDuration(tanggalValue);
                    const durationText = formatDuration(duration.years, duration.months, duration.days);

                    // Create one long message (no line breaks, let CSS handle wrapping)
                    const message = `Halo ${namaValue}... Ternyata kita sudah bersama sejak ${tanggalValue}. Sudah ${durationText} kita bersama. Terima kasih telah menjadi bagian terindah dalam hidupku, terima kasih telah memberiku kebahagiaan yang tak ternilai, terima kasih untuk semua kenangan indah yang kita buat bersama. Aku bersyukur memilikimu setiap hari. Kamu adalah anugerah terindah dalam hidupku. Mari kita lanjutkan perjalanan indah ini bersama-sama. Aku mencintaimu lebih dari kata-kata bisa ungkapkan. ‚ù§Ô∏è`;

                    // Typewriter effect
                    let i = 0;
                    const typingSpeed = 30;

                    function typeWriter() {
                        if (i < message.length) {
                            messege2P.textContent += message.charAt(i);
                            i++;
                            setTimeout(typeWriter, typingSpeed);
                        } else {
                            // After finishing typing, show the reply button
                            messege2.classList.add('kelip');
                            body.classList.replace('background1', 'background2');
                            body.classList.add('muncul');
                            hilang2.style.display = "block";
                        }
                    }

                    // Clear existing text and start typing
                    messege2P.textContent = '';
                    typeWriter();
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // User closed the popup
                } else {
                    // Validation failed - tanggal salah
                    salahCount++;
                    showAngryMessage(salahCount, showInputForm);
                }
            });
        }

        // Function untuk menampilkan popup teka-teki
        function showTekaTekiPopup() {
            Swal.fire({
                title: 'Ada teka-teki nih! üß©',
                text: 'Kamu mau main teka-teki cinta gak?',
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Ya, mau!',
                cancelButtonText: 'Enggak ah',
                confirmButtonColor: '#25D366',
                cancelButtonColor: '#ff4757',
                background: '#fff',
                color: '#333'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Jika user memilih "Ya", buka WhatsApp dengan pesan teka-teki
                    const encodedMessage = encodeURIComponent(textWa);
                    window.open(`https://wa.me/${nomorWa}/?text=${encodedMessage}`, '_blank');

                    // Tampilkan pesan selamat
                    Swal.fire({
                        title: 'Yey! üéâ',
                        text: 'Teka-teki cinta sudah dikirim ke WhatsApp!',
                        icon: 'success',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#25D366'
                    });
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // Jika user memilih "Enggak", tampilkan popup kecewa
                    Swal.fire({
                        title: 'Hmm... üòî',
                        text: 'Yah, kecewa deh kamu enggak mau main teka-teki...',
                        icon: 'error',
                        confirmButtonText: 'OK',
                        confirmButtonColor: '#ff4757',
                        background: '#fff',
                        color: '#333'
                    });
                }
            });
        }

        // Variable untuk menyimpan jumlah percobaan salah
        let salahCount = 0;

        // Start button click event
        btnPlay.addEventListener('click', () => {
            // Try to play audio
            audio.play().catch(e => console.log("Audio play error:", e));

            // Show first message
            messege1.style.display = "block";
            messege1.style.transform = "translateX(0)";
            btnPlay.style.display = "none";
            hilang1.style.display = "block";
        });

        // First message click event
        hilang1.addEventListener('click', () => {
            // Hide first message, show second
            messege1.style.display = "none";
            messege2.style.transform = "translateX(0)";
            hilang1.style.display = "none";

            // Reset salah count
            salahCount = 0;

            // Show the input form
            showInputForm();
        });

        // Reply button click event - DIMODIFIKASI
        hilang2.addEventListener('click', () => {
            // Tampilkan popup teka-teki terlebih dahulu
            showTekaTekiPopup();
        });

        // Auto-play audio on user interaction
        document.addEventListener('click', function initAudio() {
            audio.play().then(() => {
                console.log('Audio playing');
            }).catch(e => {
                console.log('Audio autoplay failed:', e);
            });
            document.removeEventListener('click', initAudio);
        }, { once: true });

        // Ensure WhatsApp icon is properly sized
        document.addEventListener('DOMContentLoaded', function () {
            const waIcons = document.querySelectorAll('.left-header img');
            waIcons.forEach(img => {
                img.style.width = '30px';
                img.style.height = '30px';
            });
        });
    </script>
</body>

</html>